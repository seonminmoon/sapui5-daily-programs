<mvc:View
    controllerName="charts.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
	xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
	xmlns:l="sap.ui.layout"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
>
    <Shell id="shell">
        <App id="app">
            <pages>
                <Page title="연도별 항공사 매출" class="sapUiResponsiveContentPadding">

                    <l:Grid containerQuery="true">
                        <VBox>
                        <f:Form id="FormToolbar"
                            editable="true"
                            ariaLabelledBy="Title1">
                            <f:toolbar>
                                <Toolbar id="TB1">
                                    <Title id="Title1" text="조건"/>
                                    <ToolbarSpacer />
                                    <Button icon="sap-icon://search"/>
                                </Toolbar>
                            </f:toolbar>
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    labelSpanXL="4"
                                    labelSpanL="3"
                                    labelSpanM="4"
                                    labelSpanS="12"
                                    adjustLabelSpan="false"
                                    emptySpanXL="0"
                                    emptySpanL="4"
                                    emptySpanM="0"
                                    emptySpanS="0"
                                    columnsXL="2"
                                    columnsL="1"
                                    columnsM="1"
                                    singleContainerFullSize="false" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer ariaLabelledBy="Title3">
                                    <f:formElements>
                                        <f:FormElement label="선택년도:">
                                            <f:fields>
                                                <Select width="70%"/>
                                            </f:fields>
                                        </f:FormElement>
                                    </f:formElements>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>
                            <layoutData>
                                <l:GridData span="XL3 L3 M12 S12"/>
                            </layoutData>
                        </VBox>

                        <VBox>
                            <Panel headerText="항공사별 매출" expandable="true" expanded="true">
                                <Table
                                    id="idProductsTable"
                                    inset="false"
                                    items="{
                                        path: '/ProductCollection',
                                        sorter: {
                                            path: 'Name'
                                        }
                                    }">
                                    <columns>
                                        <Column width="12em">
                                            <Text text="년도" />
                                        </Column>
                                        <Column minScreenWidth="Tablet" demandPopin="true">
                                            <Text text="항공사" />
                                        </Column>
                                        <Column
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            hAlign="Right">
                                            <Text text="항공사명" />
                                        </Column>
                                        <Column
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            hAlign="Center">
                                            <Text text="예약 건수" />
                                        </Column>
                                        <Column hAlign="Right">
                                            <Text text="매출액" />
                                        </Column>
                                        <Column
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            hAlign="Center">
                                            <Text text="취소 건수" />
                                        </Column>
                                    </columns>
                                    <items>
                                        <ColumnListItem>
                                            <cells>
                                                <ObjectIdentifier title="{Name}" text="{ProductId}" />
                                                <Text text="{SupplierName}" />
                                                <Text text="{Width} x {Depth} x {Height} {DimUnit}" />
                                                <ObjectNumber number="{WeightMeasure}" unit="{WeightUnit}" />
                                                <ObjectNumber number="{
                                                    parts:[{path:'Price'},{path:'CurrencyCode'}],
                                                    type: 'sap.ui.model.type.Currency'
                                                    }"
                                                    unit="{CurrencyCode}" />
                                                <ObjectNumber number="{WeightMeasure}" unit="{WeightUnit}" />
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </Panel>

                            <!-- Chart line  -->
                            <VBox>
                                <l:Grid containerQuery="true">
                                    <l:FixFlex id='chartFixFlex' minFlexSize="250">
                                        <l:flexContent>
                                            <viz:Popover id="donutPopover"></viz:Popover>
                                            <viz:VizFrame 
                                                id="idDonutChart" 
                                                height="100%" 
                                                width="100%" 
                                                vizType='donut'
                                                selectData="onSelectData">
                                            </viz:VizFrame>
                                        </l:flexContent>
                                    </l:FixFlex>

                                    <l:FixFlex id='chartFixFlex2' minFlexSize="250">
                                        <l:flexContent>
                                            <!-- <viz:Popover id="stackPopover"></viz:Popover> -->
                                            <viz:VizFrame 
                                                id="idColumnChart" 
                                                height="100%" 
                                                width="100%" 
                                                vizType='stacked_column'>
                                            </viz:VizFrame>
                                        </l:flexContent>
                                    </l:FixFlex>
                                </l:Grid>
                                
                            </VBox>
                            <layoutData>
                                <l:GridData span="XL9 L9 M12 S12"/>
                            </layoutData>
                        </VBox>

                    </l:Grid>
                </Page>
            </pages>
        </App>
    </Shell>
</mvc:View>