<mvc:View
	controllerName="todolist.controller.Main"
	xmlns="sap.m"
	xmlns:t="sap.ui.table"
	xmlns:core="sap.ui.core"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz.data="sap.viz.ui5.data"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:custom="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
	<SplitApp
		id="SplitAppDemo"
		initialDetail="detail"
		initialMaster="master">
		<masterPages>
			<Page
				id="master"
				title="Master 1"
				backgroundDesign= "List">
				<List>
					<StandardListItem title="To Master2" type="Navigation" press=".onPressGoToMaster" />
				</List>
			</Page>
			<Page
				id="master2"
				title="Master 2"
				backgroundDesign="List"
				showNavButton="true"
				navButtonPress=".onPressMasterBack">
				<List itemPress=".onListItemPress">
					<items>
						<StandardListItem title="sap.ui.table.Table" type="Active" custom:to="detail" />
						<StandardListItem title="sap.m.Table" type="Active" custom:to="detailDetail" />
						<!-- <StandardListItem title="Product Details Line Chart" type="Active" custom:to="chartDetail" /> -->
					</items>
				</List>
                <viz:VizFrame id="idPieChart" vizType='pie' height="300px" width="auto" 
                selectData="onPressChartSelectData"
                custom:to="chartDetail"
                vizProperties="{
                    'legend' : { 'visible' : true },
                    'title' : { 'visible' : true , text : 'Products Chart'},
                    plotArea: {
                        dataLabel: { visible: false },
                        colorPalette:['#B5B2FF', '#B2EBF4', '#B7F0B1', '#FFE08C', '#FFC19E', '#FFA7A7']
                    }
                }">
                    <viz:dataset>
                        <viz.data:FlattenedDataset data="{/Product}">
                            <viz.data:dimensions>
                                <viz.data:DimensionDefinition name="Product Name" value="{ProductName}" />
                            </viz.data:dimensions>
                            <viz.data:measures>
                                <viz.data:MeasureDefinition name="Unit Price" value="{UnitPrice}" />
                            </viz.data:measures>
                        </viz.data:FlattenedDataset>
                    </viz:dataset>

                    <viz:feeds>
                        <viz.feeds:FeedItem uid="size" type="Measure" values="Unit Price" />
                        <viz.feeds:FeedItem uid="color" type="Dimension" values="Product Name" />
                    </viz:feeds>
                </viz:VizFrame>
			</Page>
		</masterPages>
		<detailPages>
            <!-- 첫번째 상세페이지 : UI Table-->
			<Page
				id="detail"
				title="Detail 1"
				backgroundDesign= "Solid">
                <Table id="idProductsTable"
                    items="{
                        path: '/ProductCollection',
                        sorter: {
                            path: 'Name'
                        }
                    }">
                    <headerToolbar>
                        <OverflowToolbar>
                            <content>
                                <Title text="sap.m.Table"/>
                                <ToolbarSpacer />
                                <Button icon="sap-icon://add" press="onAdd2"/>
                                <Button icon="sap-icon://delete" press="onDelete2"/>
                            </content>
                        </OverflowToolbar>
                    </headerToolbar>
                    <infoToolbar>
                        <OverflowToolbar>
                            <Label text="Wide range of available products"/>
                        </OverflowToolbar>
                    </infoToolbar>
                    <columns>
                        <Column
                            width="12em">
                            <Text text="Product" />
                        </Column>
                        <Column
                            minScreenWidth="Tablet"
                            demandPopin="true">
                            <Text text="Supplier" />
                        </Column>
                        <Column
                            minScreenWidth="Desktop"
                            demandPopin="true"
                            hAlign="End">
                            <Text text="Dimensions" />
                        </Column>
                        <Column
                            minScreenWidth="Desktop"
                            demandPopin="true"
                            hAlign="Center">
                            <Text text="Weight" />
                        </Column>
                        <Column
                            hAlign="End">
                            <Text text="Price" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem vAlign="Middle">
                            <cells>
                                <ObjectIdentifier
                                    title="{Name}"
                                    text="{ProductId}"/>
                                <Text
                                    text="{SupplierName}" />
                                <Text
                                    text="{Width} x {Depth} x {Height} {DimUnit}" />
                                <ObjectNumber
                                    number="{WeightMeasure}"
                                    unit="{WeightUnit}"
                                    state="{
                                        parts: [
                                            {path: 'WeightMeasure'},
                                            {path: 'WeightUnit'}
                                        ],
                                        formatter: 'sap.m.sample.Table.Formatter.weightState'
                                    }" />
                                <ObjectNumber
                                        number="{
                                            parts:[{path:'Price'},{path:'CurrencyCode'}],
                                            type: 'sap.ui.model.type.Currency',
                                            formatOptions: {showMeasure: false}
                                        }"
                                        unit="{CurrencyCode}" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
			</Page>
            <!-- 두번째 상세페이지 : M Table-->
			<Page
				id="detailDetail"
				title="Detail Detail"
				backgroundDesign= "Solid"
				showNavButton="true"
				navButtonPress=".onPressDetailBack">
                <t:Table
                    rows="{/mTable}"
                    visibleRowCount="7"
                    ariaLabelledBy="title">
                    <t:extension>
                        <OverflowToolbar style="Clear">
                            <content>
                                <Title text="sap.ui.table.Table" level="H2"/>
                                <ToolbarSpacer />
                                <Button icon="sap-icon://add" press="onAdd1"/>
                                <Button icon="sap-icon://delete" press="onDelete1"/>
                            </content>
                        </OverflowToolbar>
                    </t:extension>
                    <t:columns>
                        
                        <t:Column width="11rem" hAlign="Center">
                            <Label text="Delivery Date" />
                            <t:template>
                                <Text text="test" />
                            </t:template>
                        </t:Column>
                    </t:columns>
                </t:Table>
			</Page>
            <!-- 세번째 상세페이지 : Default -->
			<Page
				id="chartDetail"
				title="Product Details Line Chart"
				backgroundDesign= "Solid">
                <viz:VizFrame 
                    id="idLineChart"
                    width="100%" height="70%"
                    vizType='line'
                    vizProperties="{ 'title' : { 'visible' : false , text : 'Product Details'} }">
                    <viz:dataset>
                        <viz.data:FlattenedDataset data="{/lineChartData}">
                            <viz.data:dimensions>
                                <viz.data:DimensionDefinition name="SkillName" value="{name}" />
                            </viz.data:dimensions>
                            <viz.data:measures>
                                <viz.data:MeasureDefinition name="rate" value="{rate}" />
                            </viz.data:measures>
                        </viz.data:FlattenedDataset>
                    </viz:dataset>

                    <viz:feeds>
                        <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="SkillName" />
                        <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="rate" />
                    </viz:feeds>
                </viz:VizFrame>
			</Page>
		</detailPages>
	</SplitApp>
</mvc:View>